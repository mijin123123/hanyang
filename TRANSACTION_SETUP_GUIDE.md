# 입출금 관리 시스템 설치 안내

## 1. 데이터베이스 설정

### Supabase SQL Editor에서 실행할 SQL

1. Supabase 프로젝트 대시보드 접속
2. SQL Editor 메뉴 클릭
3. `transaction-schema.sql` 파일의 내용을 복사하여 실행

### 추가할 테이블들:
- `member_balances`: 회원별 잔액 관리
- `transactions`: 입출금 신청 내역
- `transaction_logs`: 거래 처리 로그

## 2. 서버 재시작

```bash
# 터미널에서 서버 재시작
npm start
# 또는
node server.js
```

## 3. 기능 테스트

### 일반 사용자 기능:
1. `/withdraw_request` 페이지에서 입금/출금 신청
2. 실시간 잔액 확인
3. 거래 내역 조회

### 관리자 기능:
1. `/admin/transaction-management` 페이지에서 신청 내역 조회
2. 입금/출금 신청 승인/거부
3. 관리자 메모 작성

## 4. 주요 변경사항

### 입출금 신청 프로세스:
1. 사용자가 입금/출금 신청
2. 관리자가 승인/거부 결정
3. 승인 시 자동으로 잔액 업데이트
4. 모든 과정이 데이터베이스에 기록

### 보안 기능:
- 사용자별 권한 확인
- 잔액 부족 시 출금 차단
- 최소 금액 제한 (입금 50,000원, 출금 10,000원)

### 실시간 데이터:
- 마이페이지에서 실제 잔액 표시
- 거래 내역 실시간 업데이트
- 관리자 승인 즉시 반영

## 5. 기본 데이터

시스템 설치 후 기존 사용자들의 초기 잔액이 설정됩니다:
- minj0010: ₩4,623,000
- admin 계정: ₩15,000,000
- 기타 사용자: ₩0

## 6. 문제 해결

### 오류 발생 시:
1. 서버 로그 확인
2. Supabase 데이터베이스 연결 상태 확인
3. 브라우저 콘솔 오류 메시지 확인

### 데이터베이스 권한 오류:
- Supabase 프로젝트의 RLS(Row Level Security) 설정 확인
- API 키 권한 확인
